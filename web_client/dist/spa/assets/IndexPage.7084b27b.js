import{Q as se}from"./QPage.a5509199.js";import{g as X,u as ue,b as ce,C as de,s as fe,q as me}from"./CPopUp.76e0f6ed.js";import{l as t,k as E,aJ as ge,aK as ve,j as S,J as ye,r as v,q as be,s as ee,U as he,p as j,T as Se,w as P,aD as R,x as K,Q as _e,P as we,u as Ce,A as ke,y as qe,aL as z,n as Y,F,aM as H,E as xe,aN as Z,L as Ne,af as G,au as J,ag as te,ah as A,ak as D,am as x,aj as Q,al as q,ai as ae,aO as Be,aP as ne,aw as le,ao as W,ar as Ie}from"./index.a18820e4.js";import"./pinia.275a88b3.js";const Te=[t("g",{"stroke-width":"4","stroke-linecap":"round"},[t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var pe=E({name:"QSpinnerIos",props:ge,setup(e){const{cSize:i,classes:o}=ve(e);return()=>t("svg",{class:o.value,width:i.value,height:i.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},Te)}});const Le=["top","middle","bottom"];var re=E({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Le.includes(e)}},setup(e,{slots:i}){const o=S(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=S(()=>{const n=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(n!==void 0?` text-${n}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>t("div",{class:a.value,style:o.value,role:"status","aria-label":e.label},ye(i.default,e.label!==void 0?[e.label]:[]))}});const $e={ratio:[String,Number]};function Pe(e,i){return S(()=>{const o=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const Ae=1.7778;var ie=E({name:"QImg",props:{...$e,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ae},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:o}){const a=v(e.initialRatio),n=Pe(e,a),y=K(),{registerTimeout:N,removeTimeout:w}=X(),{registerTimeout:l,removeTimeout:c}=X(),C=S(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),k=S(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),m=[v(null),v(C.value)],g=v(0),b=v(!1),_=v(!1),B=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),u=S(()=>({width:e.width,height:e.height})),d=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),f=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function I(){if(c(),e.loadingShowDelay===0){b.value=!0;return}l(()=>{b.value=!0},e.loadingShowDelay)}function T(){c(),b.value=!1}function U({target:r}){R(y)===!1&&(w(),a.value=r.naturalHeight===0?.5:r.naturalWidth/r.naturalHeight,s(r,1))}function s(r,L){L===1e3||R(y)===!0||(r.complete===!0?h(r):N(()=>{s(r,L+1)},50))}function h(r){R(y)!==!0&&(g.value=g.value^1,m[g.value].value=null,T(),r.getAttribute("__qerror")!=="true"&&(_.value=!1),o("load",r.currentSrc||r.src))}function p(r){w(),T(),_.value=!0,m[g.value].value=k.value,m[g.value^1].value=C.value,o("error",r)}function V(r){const L=m[r].value,M={key:"img_"+r,class:d.value,style:f.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...L};return g.value===r?Object.assign(M,{class:M.class+"current",onLoad:U,onError:p}):M.class+="loaded",t("div",{class:"q-img__container absolute-full",key:"img"+r},t("img",M))}function O(){return b.value===!1?t("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},j(i[_.value===!0?"error":"default"])):t("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[t(Se,{color:e.spinnerColor,size:e.spinnerSize})])}{let r=function(){P(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,L=>{w(),_.value=!1,L===null?(T(),m[g.value^1].value=C.value):I(),m[g.value].value=L},{immediate:!0})};be.value===!0?ee(r):r()}return()=>{const r=[];return n.value!==null&&r.push(t("div",{key:"filler",style:n.value})),m[0].value!==null&&r.push(V(0)),m[1].value!==null&&r.push(V(1)),r.push(t(he,{name:"q-transition--fade"},O)),t("div",{key:"main",class:B.value,style:u.value,role:"img","aria-label":e.alt},r)}}}),oe=E({name:"QCard",props:{...ue,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:i}){const{proxy:{$q:o}}=K(),a=ce(e,o),n=S(()=>"q-card"+(a.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>t(e.tag,{class:n.value},j(i.default))}});const{passive:$}=qe;var Ee=E({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:i,emit:o}){const a=v(!1),n=v(!0),y=v(null),N=v(null);let w=e.initialIndex||0,l,c;const C=S(()=>"q-infinite-scroll__loading"+(a.value===!0?"":" invisible"));function k(){if(e.disable===!0||a.value===!0||n.value===!1)return;const s=z(l),h=F(l),p=Z(l);e.reverse===!1?Math.round(h+p+e.offset)>=Math.round(s)&&m():Math.round(h)<=e.offset&&m()}function m(){if(e.disable===!0||a.value===!0||n.value===!1)return;w++,a.value=!0;const s=z(l);o("load",w,h=>{n.value===!0&&(a.value=!1,Y(()=>{if(e.reverse===!0){const p=z(l),V=F(l),O=p-s;H(l,V+O)}h===!0?_():y.value&&y.value.closest("body")&&c()}))})}function g(){w=0}function b(){n.value===!1&&(n.value=!0,l.addEventListener("scroll",c,$)),k()}function _(){n.value===!0&&(n.value=!1,a.value=!1,l.removeEventListener("scroll",c,$),c!==void 0&&c.cancel!==void 0&&c.cancel())}function B(){if(l&&n.value===!0&&l.removeEventListener("scroll",c,$),l=xe(y.value,e.scrollTarget),n.value===!0){if(l.addEventListener("scroll",c,$),e.reverse===!0){const s=z(l),h=Z(l);H(l,s-h)}k()}}function u(s){w=s}function d(s){s=parseInt(s,10);const h=c;c=s<=0?k:Ne(k,isNaN(s)===!0?100:s),l&&n.value===!0&&(h!==void 0&&l.removeEventListener("scroll",h,$),l.addEventListener("scroll",c,$))}function f(s){if(I.value===!0){if(N.value===null){s!==!0&&Y(()=>{f(!0)});return}const h=`${a.value===!0?"un":""}pauseAnimations`;Array.from(N.value.getElementsByTagName("svg")).forEach(p=>{p[h]()})}}const I=S(()=>e.disable!==!0&&n.value===!0);P([a,I],()=>{f()}),P(()=>e.disable,s=>{s===!0?_():b()}),P(()=>e.reverse,()=>{a.value===!1&&n.value===!0&&k()}),P(()=>e.scrollTarget,B),P(()=>e.debounce,d);let T=!1;_e(()=>{T!==!1&&l&&H(l,T)}),we(()=>{T=l?F(l):!1}),Ce(()=>{n.value===!0&&l.removeEventListener("scroll",c,$)}),ee(()=>{d(e.debounce),B(),a.value===!1&&f()});const U=K();return Object.assign(U.proxy,{poll:()=>{c!==void 0&&c()},trigger:m,stop:_,reset:g,resume:b,setIndex:u,updateScrollTarget:B}),()=>{const s=ke(i.default,[]);return I.value===!0&&s[e.reverse===!1?"push":"unshift"](t("div",{ref:N,class:C.value},j(i.loading))),t("div",{class:"q-infinite-scroll",ref:y},s)}}});const Qe={class:"tw-absolute tw-container tw-bottom-8 tw-items-center tw-justify-center tw-flex"},Ve={class:"absolute-bottom tw-bg-neutral-800 tw-text-white tw-p-2"},Me=G({__name:"CInfiniteScroll",props:J({items:{type:Array,required:!0}},{disable:{type:Boolean,default:!1},disableModifiers:{}}),emits:J(["loadMore","cardClick"],["update:disable"]),setup(e){const i=te(e,"disable");return(o,a)=>(A(),D(Ee,{disable:i.value,class:"tw-container tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4",onLoad:a[0]||(a[0]=(n,y)=>o.$emit("loadMore",n,y))},{loading:x(()=>[Q("div",Qe,[q(pe,{size:"80px"})])]),default:x(()=>[(A(!0),ae(ne,null,Be(e.items,n=>(A(),D(oe,{key:n.id,onClick:y=>o.$emit("cardClick",n),class:"tw-cursor-pointer"},{default:x(()=>[q(ie,{src:n.imageUrl,alt:"Image",class:"tw-h-64",loading:"lazy","spinner-color":"white",fit:"contain"},{default:x(()=>[Q("div",Ve,[le(W(n.title)+" ",1),(A(),D(re,{rounded:"",class:"tw-mx-0.5",key:n.tag,color:"primary",label:n.tag},null,8,["label"]))])]),_:2},1032,["src"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["disable"]))}});var ze=E({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:i}){const o=S(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>t(e.tag,{class:o.value},j(i.default))}});const De={class:"column"},je={class:"text-h5 q-mt-sm q-mb-xs"},Ue={class:"text-caption text-black"},Oe=G({__name:"WPhotoDetails",props:J({artItem:{type:Object,required:!0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const i=te(e,"modelValue");return(o,a)=>(A(),D(de,{position:"standard",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=n=>i.value=n),width:500},{default:x(()=>[Q("div",De,[q(oe,{flat:"",bordered:""},{default:x(()=>[q(ie,{src:e.artItem.imageUrl},null,8,["src"]),q(ze,null,{default:x(()=>[Q("div",je,W(e.artItem.title),1),Q("div",Ue,[le(W(e.artItem.description)+" ",1),q(re,{rounded:"",class:"tw-mx-0.5",color:"primary",label:e.artItem.tag},null,8,["label"])])]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}});const Re=G({__name:"IndexPage",setup(e){console.log("Frontend version: 6.6.6");const i=u=>({id:u.id,title:u.title,description:u.description,imageUrl:u.path.replace("/home/ubuntu","https://cathackers.xyz"),tag:u.category}),o=fe(),a=o.searchItem,n=()=>l.notify({message:"\u041D\u0435\u0442 \u0431\u043E\u043B\u044C\u0448\u0435 \u043E\u0431\u044A\u0435\u043A\u0442\u043E\u0432 \u0441 \u0442\u0430\u043A\u0438\u043C\u0438 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430\u043C\u0438",color:"negative",position:"top"}),y=N(()=>w(),800);o.$subscribe(()=>{y(),a.image||(a.path=void 0)});function N(u,d){let f;return function(...I){clearTimeout(f),f=setTimeout(()=>{u(...I)},d)}}const w=()=>{C.value=!1,m=0,b.value=[],_().then(u=>{if(!u.length){n();return}b.value=u.map(i)}).catch(console.error)},l=me(),c=v(),C=v(!1);let k=12,m=0;const g=v(!1),b=v([]),_=async()=>{try{const u=await fetch(`/api/get_arts_info?limit=${k}&offset=${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a==null?void 0:a.title,path:a==null?void 0:a.path,category:a==null?void 0:a.category})});u.ok||l.notify({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043E\u0431\u044A\u0435\u043A\u0442\u043E\u0432",color:"negative",position:"top"});const d=await u.json();return m+=k,d}catch(u){console.error(u)}},B=(u,d)=>{_().then(f=>{if(console.log(f.length),!f.length){C.value=!0,n(),d();return}b.value=b.value.concat(f.map(i)),d()}).catch(console.error)};return(u,d)=>(A(),ae(ne,null,[q(se,{class:"column",style:{width:"100%"}},{default:x(()=>[q(Me,{disable:C.value,"onUpdate:disable":d[0]||(d[0]=f=>C.value=f),items:b.value,onCardClick:d[1]||(d[1]=f=>{g.value=!0,c.value=f}),onLoadMore:B,class:"tw-m-auto tw-pt-4"},null,8,["disable","items"])]),_:1}),q(Oe,{artItem:c.value,modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=f=>g.value=f)},null,8,["artItem","modelValue"])],64))}});var Ke=Ie(Re,[["__scopeId","data-v-537f67f7"]]);export{Ke as default};
