import{Q as se}from"./QPage.e3814ac3.js";import{g as X,u as ue,b as ce,C as de,s as fe,q as me}from"./CPopUp.054559eb.js";import{l as t,k as P,aJ as ge,aK as ve,j as h,J as ye,r as g,q as be,s as ee,U as he,p as j,T as Se,w as p,aD as R,x as K,Q as we,P as _e,u as Ce,A as ke,y as qe,aL as z,n as Y,F as H,aM as F,E as xe,aN as Z,L as Ne,af as G,au as J,ag as te,ah as $,ak as D,am as x,aj as V,al as q,ai as ae,aO as Be,aP as le,aw as re,ao as W,ar as Ie,C as Te}from"./index.749c202d.js";import"./pinia.ac4df421.js";const Le=[t("g",{"stroke-width":"4","stroke-linecap":"round"},[t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),t("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[t("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var pe=P({name:"QSpinnerIos",props:ge,setup(e){const{cSize:n,classes:s}=ve(e);return()=>t("svg",{class:s.value,width:n.value,height:n.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},Le)}});const $e=["top","middle","bottom"];var ie=P({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>$e.includes(e)}},setup(e,{slots:n}){const s=h(()=>e.align!==void 0?{verticalAlign:e.align}:null),l=h(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>t("div",{class:l.value,style:s.value,role:"status","aria-label":e.label},ye(n.default,e.label!==void 0?[e.label]:[]))}});const Pe={ratio:[String,Number]};function Ee(e,n){return h(()=>{const s=Number(e.ratio||(n!==void 0?n.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const Qe=1.7778;var ne=P({name:"QImg",props:{...Pe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Qe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:n,emit:s}){const l=g(e.initialRatio),a=Ee(e,l),v=K(),{registerTimeout:_,removeTimeout:S}=X(),{registerTimeout:r,removeTimeout:c}=X(),C=h(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),w=h(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[g(null),g(C.value)],y=g(0),k=g(!1),o=g(!1),d=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),m=h(()=>({width:e.width,height:e.height})),L=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),E=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function Q(){if(c(),e.loadingShowDelay===0){k.value=!0;return}r(()=>{k.value=!0},e.loadingShowDelay)}function N(){c(),k.value=!1}function U({target:i}){R(v)===!1&&(S(),l.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,u(i,1))}function u(i,I){I===1e3||R(v)===!0||(i.complete===!0?b(i):_(()=>{u(i,I+1)},50))}function b(i){R(v)!==!0&&(y.value=y.value^1,f[y.value].value=null,N(),i.getAttribute("__qerror")!=="true"&&(o.value=!1),s("load",i.currentSrc||i.src))}function B(i){S(),N(),o.value=!0,f[y.value].value=w.value,f[y.value^1].value=C.value,s("error",i)}function A(i){const I=f[i].value,M={key:"img_"+i,class:L.value,style:E.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...I};return y.value===i?Object.assign(M,{class:M.class+"current",onLoad:U,onError:B}):M.class+="loaded",t("div",{class:"q-img__container absolute-full",key:"img"+i},t("img",M))}function O(){return k.value===!1?t("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},j(n[o.value===!0?"error":"default"])):t("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():e.noSpinner===!0?void 0:[t(Se,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){p(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,I=>{S(),o.value=!1,I===null?(N(),f[y.value^1].value=C.value):Q(),f[y.value].value=I},{immediate:!0})};be.value===!0?ee(i):i()}return()=>{const i=[];return a.value!==null&&i.push(t("div",{key:"filler",style:a.value})),f[0].value!==null&&i.push(A(0)),f[1].value!==null&&i.push(A(1)),i.push(t(he,{name:"q-transition--fade"},O)),t("div",{key:"main",class:d.value,style:m.value,role:"img","aria-label":e.alt},i)}}}),oe=P({name:"QCard",props:{...ue,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const{proxy:{$q:s}}=K(),l=ce(e,s),a=h(()=>"q-card"+(l.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>t(e.tag,{class:a.value},j(n.default))}});const{passive:T}=qe;var Ve=P({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:n,emit:s}){const l=g(!1),a=g(!0),v=g(null),_=g(null);let S=e.initialIndex||0,r,c;const C=h(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function w(){if(e.disable===!0||l.value===!0||a.value===!1)return;const u=z(r),b=H(r),B=Z(r);e.reverse===!1?Math.round(b+B+e.offset)>=Math.round(u)&&f():Math.round(b)<=e.offset&&f()}function f(){if(e.disable===!0||l.value===!0||a.value===!1)return;S++,l.value=!0;const u=z(r);s("load",S,b=>{a.value===!0&&(l.value=!1,Y(()=>{if(e.reverse===!0){const B=z(r),A=H(r),O=B-u;F(r,A+O)}b===!0?o():v.value&&v.value.closest("body")&&c()}))})}function y(){S=0}function k(){a.value===!1&&(a.value=!0,r.addEventListener("scroll",c,T)),w()}function o(){a.value===!0&&(a.value=!1,l.value=!1,r.removeEventListener("scroll",c,T),c!==void 0&&c.cancel!==void 0&&c.cancel())}function d(){if(r&&a.value===!0&&r.removeEventListener("scroll",c,T),r=xe(v.value,e.scrollTarget),a.value===!0){if(r.addEventListener("scroll",c,T),e.reverse===!0){const u=z(r),b=Z(r);F(r,u-b)}w()}}function m(u){S=u}function L(u){u=parseInt(u,10);const b=c;c=u<=0?w:Ne(w,isNaN(u)===!0?100:u),r&&a.value===!0&&(b!==void 0&&r.removeEventListener("scroll",b,T),r.addEventListener("scroll",c,T))}function E(u){if(Q.value===!0){if(_.value===null){u!==!0&&Y(()=>{E(!0)});return}const b=`${l.value===!0?"un":""}pauseAnimations`;Array.from(_.value.getElementsByTagName("svg")).forEach(B=>{B[b]()})}}const Q=h(()=>e.disable!==!0&&a.value===!0);p([l,Q],()=>{E()}),p(()=>e.disable,u=>{u===!0?o():k()}),p(()=>e.reverse,()=>{l.value===!1&&a.value===!0&&w()}),p(()=>e.scrollTarget,d),p(()=>e.debounce,L);let N=!1;we(()=>{N!==!1&&r&&F(r,N)}),_e(()=>{N=r?H(r):!1}),Ce(()=>{a.value===!0&&r.removeEventListener("scroll",c,T)}),ee(()=>{L(e.debounce),d(),l.value===!1&&E()});const U=K();return Object.assign(U.proxy,{poll:()=>{c!==void 0&&c()},trigger:f,stop:o,reset:y,resume:k,setIndex:m,updateScrollTarget:d}),()=>{const u=ke(n.default,[]);return Q.value===!0&&u[e.reverse===!1?"push":"unshift"](t("div",{ref:_,class:C.value},j(n.loading))),t("div",{class:"q-infinite-scroll",ref:v},u)}}});const Ae={class:"tw-absolute tw-bottom-0 tw-w-full tw-items-center tw-justify-center tw-flex"},Me={class:"absolute-bottom tw-bg-neutral-800 tw-text-white tw-p-2"},ze=G({__name:"CInfiniteScroll",props:J({items:{type:Array,required:!0}},{disable:{type:Boolean,default:!1},disableModifiers:{}}),emits:J(["loadMore","cardClick"],["update:disable"]),setup(e){const n=te(e,"disable");return(s,l)=>($(),D(Ve,{disable:n.value,class:"tw-container tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4",onLoad:l[0]||(l[0]=(a,v)=>s.$emit("loadMore",a,v))},{loading:x(()=>[V("div",Ae,[q(pe,{size:"80px"})])]),default:x(()=>[($(!0),ae(le,null,Be(e.items,a=>($(),D(oe,{key:a.id,onClick:v=>s.$emit("cardClick",a),class:"tw-cursor-pointer"},{default:x(()=>[q(ne,{src:a.imageUrl,alt:"Image",class:"tw-h-64",loading:"lazy","spinner-color":"white",fit:"contain"},{default:x(()=>[V("div",Me,[re(W(a.title)+" ",1),($(),D(ie,{rounded:"",class:"tw-mx-0.5",key:a.tag,color:"primary",label:a.tag},null,8,["label"]))])]),_:2},1032,["src"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["disable"]))}});var De=P({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const s=h(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>t(e.tag,{class:s.value},j(n.default))}});const je={class:"column"},Ue={class:"text-h5 q-mt-sm q-mb-xs"},Oe={class:"text-caption text-black"},Re=G({__name:"WPhotoDetails",props:J({artItem:{type:Object,required:!0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const n=te(e,"modelValue");return(s,l)=>($(),D(de,{position:"standard",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),width:500},{default:x(()=>[V("div",je,[q(oe,{flat:"",bordered:""},{default:x(()=>[q(ne,{src:e.artItem.imageUrl},null,8,["src"]),q(De,null,{default:x(()=>[V("div",Ue,W(e.artItem.title),1),V("div",Oe,[re(W(e.artItem.description)+" ",1),q(ie,{rounded:"",class:"tw-mx-0.5",color:"primary",label:e.artItem.tag},null,8,["label"])])]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}});const He=G({__name:"IndexPage",setup(e){const n=o=>({id:o.id,title:o.title,description:o.description,imageUrl:o.path.replace("/home/ubuntu","https://cathackers.xyz"),tag:o.category}),s=fe(),l=s.searchItem;s.$subscribe((o,d)=>{a(v,500)()});function a(o,d){let m;return function(...L){clearTimeout(m),m=setTimeout(()=>{o(...L)},d)}}const v=()=>{r.value=!1,C=0,f.value=[],y().then(o=>{f.value=o.map(n)}).catch(console.error)},_=me(),S=g(),r=g(!1);let c=10,C=0;Te("loading",{show:()=>_.loading.show({message:"\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435, \u0438\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."}),hide:()=>_.loading.hide()});const w=g(!1),f=g([]),y=async()=>{try{const d=await(await fetch(`/api/get_arts_info?limit=${c}&offset=${C}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l==null?void 0:l.title,path:l==null?void 0:l.path,category:l==null?void 0:l.category})})).json();return C+=c,d}catch(o){console.error(o)}},k=(o,d)=>{y().then(m=>{if(!m.length){r.value=!0,_.notify({message:"\u041D\u0435\u0442 \u0431\u043E\u043B\u044C\u0448\u0435 \u043E\u0431\u044A\u0435\u043A\u0442\u043E\u0432 \u0441 \u0442\u0430\u043A\u0438\u043C\u0438 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430\u043C\u0438",color:"negative",position:"bottom"}),d();return}f.value=f.value.concat(m.map(n)),d()}).catch(console.error)};return(o,d)=>($(),ae(le,null,[q(se,{class:"column",style:{width:"100%"}},{default:x(()=>[q(ze,{disable:r.value,"onUpdate:disable":d[0]||(d[0]=m=>r.value=m),items:f.value,onCardClick:d[1]||(d[1]=m=>{w.value=!0,S.value=m}),onLoadMore:k,class:"tw-m-auto tw-pt-4"},null,8,["disable","items"])]),_:1}),q(Re,{artItem:S.value,modelValue:w.value,"onUpdate:modelValue":d[2]||(d[2]=m=>w.value=m)},null,8,["artItem","modelValue"])],64))}});var Ge=Ie(He,[["__scopeId","data-v-65685b80"]]);export{Ge as default};
